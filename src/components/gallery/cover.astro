---
interface Props {
  color?: string
}
const { color = 'bg-accent/30' } = Astro.props as Props
---

<div class="fan-wrapper">
  <div class="fan-card fan-layer-0">
    <div class={`w-96 h-80 rounded-lg bg-accent/5`}></div>
  </div>

  <div class="fan-card fan-layer-1">
    <div class={`w-96 h-80 rounded-lg bg-accent/10`}></div>
  </div>

  <div class="fan-card fan-layer-2">
    <div class={`w-96 h-80 rounded-lg bg-accent/20`}></div>
  </div>

  <div class="fan-card fan-layer-3">
    <div class={`w-96 h-80 rounded-lg bg-accent/10`}></div>
  </div>

  <div class="fan-card fan-layer-4">
    <div class={`w-96 h-80 rounded-lg bg-accent/20`}></div>
  </div>

  <div class="fan-card fan-layer-5">
    <div class={`w-96 h-80 rounded-lg bg-accent/5`}></div>
  </div>

  <div class="fan-card main-card">
    <div class={`w-96 h-80 rounded-lg ${color}`}>
      <div class="px-4 py-4 flex flex-col h-full">
        <div class="w-88 h-72 rounded-lg bg-accent/100 overflow-hidden">
          <img
            src="/emb_1/image-1.png"
            alt="Gallery Image"
            class="w-full h-full object-cover rounded-lg"
          />
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .fan-wrapper {
    position: relative;
    display: inline-block;
    perspective: 1000px;
  }

  .fan-card {
    position: absolute;
    top: 0;
    left: 0;
    transition: all 0.75s ease-in-out;
  }

  .fan-layer-0,
  .fan-layer-1,
  .fan-layer-2 {
    transform-origin: bottom right;
  }

  .fan-layer-3,
  .fan-layer-4,
  .fan-layer-5 {
    transform-origin: top left;
  }

  .main-card {
    position: relative;
    z-index: 4;
  }

  /* 默认状态: 所有副本都叠在一起 */
  .fan-layer-0,
  .fan-layer-1,
  .fan-layer-2,
  .fan-layer-3,
  .fan-layer-4,
  .fan-layer-5 {
    transform: rotate(0deg);
    opacity: 0;
  }

  /* Hover 状态: 展开成扇形 */
  .fan-wrapper:hover .fan-layer-0 {
    transform: rotate(12deg);
    opacity: 1;
    z-index: 3;
  }

  .fan-wrapper:hover .fan-layer-1 {
    transform: rotate(4deg);
    opacity: 1;
    z-index: 3;
  }

  .fan-wrapper:hover .fan-layer-2 {
    transform: rotate(8deg);
    opacity: 1;
    z-index: 2;
  }

  .fan-wrapper:hover .fan-layer-3 {
    transform: rotate(4deg);
    opacity: 1;
    z-index: 1;
  }

  .fan-wrapper:hover .fan-layer-4 {
    transform: rotate(8deg);
    opacity: 1;
    z-index: 1;
  }

  .fan-wrapper:hover .fan-layer-5 {
    transform: rotate(12deg);
    opacity: 1;
    z-index: 1;
  }

  .fan-wrapper:hover .main-card {
    transform: rotate(0deg);
  }
</style>
